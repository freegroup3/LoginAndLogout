<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" 
			   width="400" height="300"
			   title="請輸入你的帳號和密碼"
			   initialize="init()">
	<fx:Script>
		<![CDATA[
			import control.LoginWindowControl;
			import event.LoginAndPlayerEvent;
			import model.StaffModel;
			import mx.managers.PopUpManager;
			
			private var loginWindowControl:LoginWindowControl;
			private var staffModel:StaffModel;
			
			private function init():void
			{
				staffModel = new StaffModel();
				loginWindowControl = new LoginWindowControl(staffModel);
				
				staffModel.addEventListener( LoginAndPlayerEvent.LOGIN_SUCCESS, LoginSucced );
				staffModel.addEventListener( LoginAndPlayerEvent.LOGIN_FAILED, LoginFailed );
			}
			
			private function clearButtonClear():void
			{
				idInputer.text = "";
				passwordInputer.text = "";
			}
			private function LoginSucced(event:String):void
			{
				dispatchEvent( new Event( LoginAndPlayerEvent.CONTAINER_ALPHA_CHANGE ));
				dispatchEvent( new Event( "close" ));
			}
			
			private function LoginFailed(event:String):void
			{
				showFailedMessage.alpha = 1;
			}
			
		]]>
	</fx:Script>
	<s:BorderContainer x="100" y="10" borderVisible="false">
		<s:layout>
			<s:VerticalLayout/>
		</s:layout>
		<s:Label id="showFailedMessage" text="帳號或密碼輸入錯誤" alpha="0"/>
		<s:HGroup>
			<s:Label text="ID:"/>
			<s:TextInput id="idInputer"/>
		</s:HGroup>
		<s:HGroup>
			<s:Label text="Password:"/>
			<s:TextInput id="passwordInputer" displayAsPassword="true"/>
		</s:HGroup>
		<s:HGroup>
			<s:Button id="LoginConfirmer" label="登入" click="loginWindowControl.pressConfirmButton()"/>
			<s:Button id="ClearInputer" label="清除" click="clearButtonClear()"/>
		</s:HGroup>
	</s:BorderContainer>
</s:TitleWindow>